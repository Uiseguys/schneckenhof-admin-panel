webpackJsonp([6],{su0z:function(l,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u=e("LMZF"),t=e("UHIZ"),a=e("0nO6"),i=(e("b2sx"),e("WYiA"),e("Xtjv")),o=e("ojgb"),d=function(){function l(l,n,e,u,t,i,o){this.fb=l,this.route=n,this.router=e,this.api=u,this.modalService=t,this.settings=i,this.toasterService=o,this.page=1,this.pageConfig={itemsPerPage:50,currentPage:1,totalItems:1},this.selectedId=0,this.form=l.group({displayName:[""],measure:["",a.Validators.compose([a.Validators.required])],unitOfMeasure:["",a.Validators.compose([a.Validators.required])]})}return l.prototype.ngOnInit=function(){var l=this;this.route.queryParams.subscribe(function(n){var e=n.page||1;l.api.getImageCount().subscribe(function(n){l.pageConfig.totalItems=n.count}),l.page=e,l.images=l.api.getImages(e,l.pageConfig.itemsPerPage),l.pageConfig.currentPage=e})},l.prototype.loadImages=function(){this.images=this.api.getImages(this.page,this.pageConfig.itemsPerPage)},l.prototype.getImages=function(l){this.router.navigate(["/dashboard/images"],{queryParams:{page:l}})},l.prototype.deleteImage=function(l){var n=this;confirm("Are you sure to delete")&&this.api.deleteImage(l.id).subscribe(function(l){n.toasterService.popAsync("success","","Image has been deleted"),n.loadImages()})},l.prototype.getImageUrl=function(l){return l?""+this.settings.API_URL+l:"-"},l.prototype.refreshList=function(l){this.toasterService.popAsync("success","","Image has been uploaded"),this.loadImages()},l}(),r=function(){},s=e("LdGb"),p=e("TRAr"),c=e("e7TK"),g=e("M3Sp"),m=e("bwoJ"),f=e("iz04"),h=e("xL20"),v=e("FN63"),I=e("Un6q"),b=e("X68L"),y=e("oKOW"),C=function(){function l(l,n,e,t){this.route=n,this.settings=e,this.zone=t,this.token="",this.mimeTypes=[],this.onChange=new u.EventEmitter,this.token=this.settings.getStorage("token","")}return l.prototype.ngOnInit=function(){var l=this;this.uploader=new y.FileUploader({url:this.settings.API_URL,authToken:this.settings.getStorage("token"),allowedMimeType:this.mimeTypes}),this.uploader.onSuccessItem=function(n,e,u,t){l.uploader.clearQueue();var a=JSON.parse(e);a.weblinkUrl=l.settings.API_URL+a.weblinkUrl,l.onChange.emit(a)},this.uploader.onErrorItem=function(n,e,u,t){alert("Sorry. file uploading failed"),l.uploader.clearQueue()},this.uploader.onWhenAddingFileFailed=function(l,n){"mimeType"===n.name&&alert("Invalid file")},this.uploader.onAfterAddingFile=function(n){l.validate?l.validate(n).then(function(){l.zone.run(function(){l.uploader.uploadAll()})},function(){l.zone.run(function(){l.uploader.clearQueue()})}):l.uploader.uploadAll()},this.route.params.subscribe(function(n){l.uploader.setOptions({url:l.settings.API_URL+"/resources/"+n.type+"/upload",authToken:l.settings.getStorage("token"),allowedMimeType:l.mimeTypes})})},l.prototype.selectFile=function(){$("#file").trigger("click")},l}(),F=u["\u0275crt"]({encapsulation:2,styles:[[".attachment-detail{border-left:1px solid #ddd;background:#f3f3f3}"]],data:{}});function R(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,5,"div",[["class","progress my-2"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n        "])),(l()(),u["\u0275eld"](2,0,null,null,2,"div",[["class","progress-bar"]],null,null,null,null,null)),u["\u0275did"](3,278528,null,0,I.NgStyle,[u.KeyValueDiffers,u.ElementRef,u.Renderer2],{ngStyle:[0,"ngStyle"]},null),u["\u0275pod"](4,{width:0}),(l()(),u["\u0275ted"](-1,null,["\n    "]))],function(l,n){l(n,3,0,l(n,4,0,n.context.$implicit.progress+"%"))},null)}function k(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](2,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.selectFile()&&u),u},null,null)),(l()(),u["\u0275ted"](-1,null,["\n        Add Image\n    "])),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275and"](16777216,null,null,1,null,R)),u["\u0275did"](6,802816,null,0,I.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](8,0,null,null,1,"input",[["class","file d-none"],["id","file"],["ng2FileSelect",""],["type","file"]],null,[[null,"change"]],function(l,n,e){var t=!0;return"change"===n&&(t=!1!==u["\u0275nov"](l,9).onChange()&&t),t},null,null)),u["\u0275did"](9,16384,null,0,b.FileSelectDirective,[u.ElementRef],{uploader:[0,"uploader"]},null),(l()(),u["\u0275ted"](-1,null,["\n\n    "])),u["\u0275ncd"](null,0),(l()(),u["\u0275ted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,6,0,e.uploader.queue),l(n,9,0,e.uploader)},null)}var A=e("PK6g"),U=e("uUAb"),w=u["\u0275crt"]({encapsulation:2,styles:[],data:{}});function S(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,17,"tr",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](2,0,null,null,3,"div",[["class","image"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n            "])),(l()(),u["\u0275eld"](4,0,null,null,0,"img",[["alt","portfolio"],["style","width: auto; height: 170px;"]],[[8,"hidden",0],[8,"src",4]],null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),u["\u0275ted"](8,null,["\n            ","\n          "])),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](10,0,null,null,6,"td",[["class","text-right"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n            "])),(l()(),u["\u0275eld"](12,0,null,null,3,"button",[["class","btn btn-danger"],["title","Delete"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.deleteImage(l.context.$implicit)&&u),u},null,null)),(l()(),u["\u0275ted"](-1,null,["\n              "])),(l()(),u["\u0275eld"](14,0,null,null,0,"i",[["class","fa fa-trash"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n            "])),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275ted"](-1,null,["\n        "]))],null,function(l,n){var e=n.component;l(n,4,0,!n.context.$implicit.weblinkUrl,e.getImageUrl(n.context.$implicit.weblinkUrl)),l(n,8,0,e.getImageUrl(n.context.$implicit.weblinkUrl))})}function M(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](2,0,null,null,2,"td",[["class","text-center my-5"],["colspan","5"]],null,null,null,null,null)),(l()(),u["\u0275ted"](3,null,["\n            ","\n          "])),u["\u0275ppd"](4,1),(l()(),u["\u0275ted"](-1,null,["\n        "]))],null,function(l,n){l(n,3,0,u["\u0275unv"](n,3,0,l(n,4,0,u["\u0275nov"](n.parent,0),"No Images Found")))})}function P(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,4,"div",[["class","mt-2 d-flex justify-content-center"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](2,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],function(l,n,e){var u=!0;return"pageChange"===n&&(u=!1!==l.component.getImages(e)&&u),u},m.b,m.a)),u["\u0275did"](3,49152,null,0,f.c,[],null,{pageChange:"pageChange"}),(l()(),u["\u0275ted"](-1,null,["\n  "]))],null,null)}function T(l){return u["\u0275vid"](0,[u["\u0275pid"](0,h.a,[v.e]),(l()(),u["\u0275eld"](1,0,null,null,52,"div",[["class","container"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n  "])),(l()(),u["\u0275eld"](3,0,null,null,13,"div",[["class","d-flex mb-4 align-items-center"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](5,0,null,null,2,"h3",[],null,null,null,null,null)),(l()(),u["\u0275ted"](6,null,["",""])),u["\u0275ppd"](7,1),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](9,0,null,null,6,"div",[["class","col-sm-10"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n      "])),(l()(),u["\u0275eld"](11,0,null,null,3,"attach-uploader",[],null,[[null,"onChange"]],function(l,n,e){var u=!0;return"onChange"===n&&(u=!1!==l.component.refreshList(e)&&u),u},k,F)),u["\u0275did"](12,114688,null,0,C,[u.ElementRef,t.a,i.a,u.NgZone],{mimeTypes:[0,"mimeTypes"]},{onChange:"onChange"}),u["\u0275pad"](13,4),(l()(),u["\u0275ted"](-1,0,["\n      "])),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275ted"](-1,null,["\n  "])),(l()(),u["\u0275ted"](-1,null,["\n  "])),(l()(),u["\u0275eld"](18,0,null,null,31,"div",[["style","min-height: 50vh"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275eld"](20,0,null,null,28,"table",[["class","table w-100"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n      "])),(l()(),u["\u0275eld"](22,0,null,null,14,"thead",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n        "])),(l()(),u["\u0275eld"](24,0,null,null,11,"tr",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](26,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),u["\u0275ted"](27,null,["",""])),u["\u0275ppd"](28,1),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](30,0,null,null,2,"th",[],null,null,null,null,null)),(l()(),u["\u0275ted"](31,null,["",""])),u["\u0275ppd"](32,1),(l()(),u["\u0275ted"](-1,null,["\n          "])),(l()(),u["\u0275eld"](34,0,null,null,0,"th",[["width","200"]],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n        "])),(l()(),u["\u0275ted"](-1,null,["\n      "])),(l()(),u["\u0275ted"](-1,null,["\n      "])),(l()(),u["\u0275eld"](38,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),u["\u0275ted"](-1,null,["\n        "])),(l()(),u["\u0275and"](16777216,null,null,3,null,S)),u["\u0275did"](41,802816,null,0,I.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),u["\u0275pid"](131072,I.AsyncPipe,[u.ChangeDetectorRef]),u["\u0275pid"](0,f.b,[f.e]),(l()(),u["\u0275ted"](-1,null,["\n        "])),(l()(),u["\u0275and"](16777216,null,null,1,null,M)),u["\u0275did"](46,16384,null,0,I.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275ted"](-1,null,["\n      "])),(l()(),u["\u0275ted"](-1,null,["\n    "])),(l()(),u["\u0275ted"](-1,null,["\n  "])),(l()(),u["\u0275ted"](-1,null,["\n\n  "])),(l()(),u["\u0275and"](16777216,null,null,1,null,P)),u["\u0275did"](52,16384,null,0,I.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),u["\u0275ted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,12,0,l(n,13,0,"image/png","image/jpeg","image/jpg","image/png")),l(n,41,0,u["\u0275unv"](n,41,0,u["\u0275nov"](n,43).transform(u["\u0275unv"](n,41,0,u["\u0275nov"](n,42).transform(e.images)),e.pageConfig))),l(n,46,0,!e.pageConfig.totalItems),l(n,52,0,e.pageConfig.totalItems>0)},function(l,n){l(n,6,0,u["\u0275unv"](n,6,0,l(n,7,0,u["\u0275nov"](n,0),"Images"))),l(n,27,0,u["\u0275unv"](n,27,0,l(n,28,0,u["\u0275nov"](n,0),"Image"))),l(n,31,0,u["\u0275unv"](n,31,0,l(n,32,0,u["\u0275nov"](n,0),"Url")))})}var N=u["\u0275ccf"]("app-image-page",d,function(l){return u["\u0275vid"](0,[(l()(),u["\u0275eld"](0,0,null,null,1,"app-image-page",[],null,null,null,T,w)),u["\u0275did"](1,114688,null,0,d,[a.FormBuilder,t.a,t.k,o.a,A.a,i.a,U.a],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),x=e("BhHz"),L=e("poDJ"),O=e("4zAq"),z=e("/XUI"),V=e("Xu3G"),j=e("2S4b"),q=e("JYV8"),D=e("eAzq"),E=e("Hw/e"),_=e("x/Up"),J=e("EQxj"),B=e("bIam"),X=e("Xuu1"),K=e("Nv++"),Q=e("T2Au"),Z=e("pBJ6");e.d(n,"ImageModuleNgFactory",function(){return H});var H=u["\u0275cmf"](r,[],function(l){return u["\u0275mod"]([u["\u0275mpd"](512,u.ComponentFactoryResolver,u["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,p.a,c.a,g.a,N]],[3,u.ComponentFactoryResolver],u.NgModuleRef]),u["\u0275mpd"](4608,I.NgLocalization,I.NgLocaleLocalization,[u.LOCALE_ID,[2,I["\u0275a"]]]),u["\u0275mpd"](4608,a["\u0275i"],a["\u0275i"],[]),u["\u0275mpd"](4608,a.FormBuilder,a.FormBuilder,[]),u["\u0275mpd"](4608,f.e,f.e,[]),u["\u0275mpd"](4608,x.a,x.a,[]),u["\u0275mpd"](4608,L.a,L.a,[u.ComponentFactoryResolver,u.NgZone,u.Injector,x.a,u.ApplicationRef]),u["\u0275mpd"](4608,A.a,A.a,[u.RendererFactory2,L.a]),u["\u0275mpd"](4608,O.a,O.a,[]),u["\u0275mpd"](4608,z.a,z.a,[]),u["\u0275mpd"](4608,V.a,V.a,[t.k,i.a,j.a]),u["\u0275mpd"](4608,o.a,o.a,[q.a,i.a]),u["\u0275mpd"](512,I.CommonModule,I.CommonModule,[]),u["\u0275mpd"](512,a["\u0275ba"],a["\u0275ba"],[]),u["\u0275mpd"](512,a.FormsModule,a.FormsModule,[]),u["\u0275mpd"](512,a.ReactiveFormsModule,a.ReactiveFormsModule,[]),u["\u0275mpd"](512,t.n,t.n,[[2,t.s],[2,t.k]]),u["\u0275mpd"](512,f.a,f.a,[]),u["\u0275mpd"](512,D.SelectModule,D.SelectModule,[]),u["\u0275mpd"](512,E.FileUploadModule,E.FileUploadModule,[]),u["\u0275mpd"](512,_.a,_.a,[]),u["\u0275mpd"](512,J.a,J.a,[]),u["\u0275mpd"](512,B.a,B.a,[]),u["\u0275mpd"](512,X.a,X.a,[]),u["\u0275mpd"](512,K.a,K.a,[]),u["\u0275mpd"](512,Q.a,Q.a,[]),u["\u0275mpd"](512,r,r,[]),u["\u0275mpd"](256,Z.a,{autoClose:!0},[]),u["\u0275mpd"](1024,t.i,function(){return[[{path:"",component:d}]]},[])])})}});