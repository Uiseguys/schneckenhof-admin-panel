webpackJsonp([2],{CYEl:function(l,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n("LMZF"),u=n("UHIZ"),a=n("oKOW"),o=n("Xtjv"),i=n("TMwh"),r=n("Dqrr"),p=function(){function l(l,e){this.http=l,this.router=e,this.apiUrl="https://www.pdf-aas.io/api"}return l.prototype.createAuthorizationHeader=function(l){},l.prototype.get=function(l,e){var n=new i.d;this.createAuthorizationHeader(n);var t=new i.i;if(e)for(var u in e)t.set(u,e[u]);return this.http.get(this.apiUrl+l,{headers:n,search:t}).map(function(l){return l.json()}).catch(this.handleError)},l.prototype.post=function(l,e){var n=new i.d;return this.createAuthorizationHeader(n),this.http.post(this.apiUrl+l,e,{headers:n}).map(function(l){return l.json()}).catch(this.handleError)},l.prototype.put=function(l,e){var n=new i.d;return this.createAuthorizationHeader(n),this.http.put(this.apiUrl+l,e,{headers:n}).map(function(l){return l.json()}).catch(this.handleError)},l.prototype.patch=function(l,e){var n=new i.d;return this.createAuthorizationHeader(n),this.http.patch(this.apiUrl+l,e,{headers:n}).map(function(l){return l.json()}).catch(this.handleError)},l.prototype.delete=function(l){var e=new i.d;return this.createAuthorizationHeader(e),this.http.delete(this.apiUrl+l,{headers:e}).map(function(l){return l.json()}).catch(this.handleError)},l.prototype.handleError=function(l){return r.Observable.throw(l)},l.prototype.getTemplates=function(){return this.get("/Templates")},l.prototype.deleteTemplate=function(l){return this.delete("/Templates/"+l)},l}(),d=n("efqP"),c=function(){function l(l,e,n,t,u){this.route=l,this.router=e,this.api=n,this.wineApi=t,this.settings=u,this.templates=[]}return l.prototype.ngOnInit=function(){var l=this;this.uploader=new a.FileUploader({url:"https://www.pdf-aas.io/api/Templates"}),this.uploader.onSuccessItem=function(e,n,t,u){l.uploader.clearQueue(),l.templates.push(JSON.parse(n))},this.uploader.onErrorItem=function(e,n,t,u){alert("Sorry. file uploading failed"),l.uploader.clearQueue()},this.uploader.onWhenAddingFileFailed=function(l,e){"mimeType"===e.name&&alert("Invalid file")},this.uploader.onAfterAddingFile=function(e){l.uploader.uploadAll()},this.api.getTemplates().subscribe(function(e){l.templates=e})},l.prototype.downloadTemplate=function(l){this.wineApi.getAll().subscribe(function(e){var n={red:{normal:[],little:[],premium:[]},white:{normal:[],little:[],premium:[]},rose:{normal:[],little:[],premium:[]},champagne:{normal:[],little:[],premium:[]}};e.forEach(function(l){n[l.type]&&(l.no=l.no||"",l.price=l.price&&l.price.toFixed(2),l.alcohol&&(l.alcohol+=" %"),.75==l.content&&(l.price1=l.price,l.price=(100*l.price/75).toFixed(2)),l.premium?n[l.type].premium.push(l):.75==l.content?n[l.type].little.push(l):n[l.type].normal.push(l))}),$("#downloadForm").attr("action","https://www.pdf-aas.io/api/Templates/"+l.id),$("#templateData").val(JSON.stringify(n)),$("#downloadForm").submit()})},l.prototype.deleteTemplate=function(l){var e=this;confirm("Are you sure to delete")&&this.api.deleteTemplate(l.id).subscribe(function(n){e.templates=e.templates.filter(function(e){return e.id!=l.id})})},l.prototype.selectFile=function(){$("#templateFile").trigger("click")},l}(),s=function(){},m=n("LdGb"),h=n("TRAr"),f=n("e7TK"),g=n("M3Sp"),b=n("Un6q"),v=n("X68L"),y=t["\u0275crt"]({encapsulation:2,styles:[["app-template-page .c-template{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:relative;width:250px;height:420px;-ms-flex-preferred-size:12%;flex-basis:12%;padding:2%;background-color:#fff;-webkit-box-shadow:0 0 1px 0 rgba(0,0,0,.25);box-shadow:0 0 1px 0 rgba(0,0,0,.25);color:#333}app-template-page .c-template:hover{text-decoration:none}app-template-page .c-template h4{height:60px}app-template-page .c-template .image img{display:block;margin:0 auto;max-height:25vh}app-template-page .c-template .description{margin-top:auto;padding-top:20px;text-align:center}"]],data:{}});function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","progress my-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","progress-bar"]],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,b.NgStyle,[t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{width:0}),(l()(),t["\u0275ted"](-1,null,["\n  "]))],function(l,e){l(e,3,0,l(e,4,0,e.context.$implicit.progress+"%"))},null)}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,10,"div",[["class","d-flex mb-2"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["\n      ","\n    "])),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](5,0,null,null,1,"button",[["class","btn btn-success btn-sm ml-auto"]],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.downloadTemplate(l.context.$implicit)&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,["Download"])),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](8,0,null,null,1,"button",[["class","btn btn-danger btn-sm ml-2"]],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.deleteTemplate(l.context.$implicit)&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,["Delete"])),(l()(),t["\u0275ted"](-1,null,["\n  "]))],null,function(l,e){l(e,3,0,e.context.$implicit.originalFilename||e.context.$implicit.name)})}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,31,"div",[["class","container"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n  "])),(l()(),t["\u0275eld"](2,0,null,null,7,"h3",[["class","mt-4"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","text-capitalize"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Templates"])),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](7,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],function(l,e,n){var t=!0;return"click"===e&&(t=!1!==l.component.selectFile()&&t),t},null,null)),(l()(),t["\u0275ted"](-1,null,["Upload"])),(l()(),t["\u0275ted"](-1,null,["\n  "])),(l()(),t["\u0275ted"](-1,null,["\n\n  "])),(l()(),t["\u0275eld"](11,0,null,null,1,"input",[["class","file d-none"],["id","templateFile"],["ng2FileSelect",""],["type","file"]],null,[[null,"change"]],function(l,e,n){var u=!0;return"change"===e&&(u=!1!==t["\u0275nov"](l,12).onChange()&&u),u},null,null)),t["\u0275did"](12,16384,null,0,v.FileSelectDirective,[t.ElementRef],{uploader:[0,"uploader"]},null),(l()(),t["\u0275ted"](-1,null,["\n  "])),t["\u0275ncd"](null,0),(l()(),t["\u0275ted"](-1,null,["\n  "])),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](17,802816,null,0,b.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275ted"](-1,null,["\n\n  "])),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](20,802816,null,0,b.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275ted"](-1,null,["\n\n  "])),(l()(),t["\u0275eld"](22,0,null,null,1,"div",[["class","text-center"]],[[8,"hidden",0]],null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    No templates uploaded.\n  "])),(l()(),t["\u0275ted"](-1,null,["\n\n  "])),(l()(),t["\u0275eld"](25,0,null,null,5,"form",[["class","d-none"],["id","downloadForm"],["method","POST"],["ngNoForm",""],["target","_blank"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](27,0,null,null,0,"input",[["id","templateData"],["name","data"],["type","text"],["value",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n    "])),(l()(),t["\u0275eld"](29,0,null,null,0,"input",[["type","submit"],["value","Submit"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\n  "])),(l()(),t["\u0275ted"](-1,null,["\n"]))],function(l,e){var n=e.component;l(e,12,0,n.uploader),l(e,17,0,n.uploader.queue),l(e,20,0,n.templates)},function(l,e){l(e,22,0,e.component.templates.length)})}var T=t["\u0275ccf"]("app-template-page",c,function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-template-page",[],null,null,null,x,y)),t["\u0275did"](1,114688,null,0,c,[u.a,u.k,p,d.a,o.a],null,null)],function(l,e){l(e,1,0)},null)},{},{},["*"]),A=n("0nO6"),k=n("iz04"),R=n("BhHz"),M=n("poDJ"),O=n("PK6g"),S=n("4zAq"),z=n("/XUI"),U=n("Xu3G"),C=n("2S4b"),E=n("JYV8"),N=n("eAzq"),D=n("Hw/e"),I=n("x/Up"),j=n("EQxj"),H=n("bIam"),L=n("Xuu1"),q=n("Nv++"),J=n("T2Au"),X=n("pBJ6");n.d(e,"TemplateModuleNgFactory",function(){return B});var B=t["\u0275cmf"](s,[],function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[m.a,h.a,f.a,g.a,T]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,b.NgLocalization,b.NgLocaleLocalization,[t.LOCALE_ID,[2,b["\u0275a"]]]),t["\u0275mpd"](4608,A["\u0275i"],A["\u0275i"],[]),t["\u0275mpd"](4608,A.FormBuilder,A.FormBuilder,[]),t["\u0275mpd"](4608,k.e,k.e,[]),t["\u0275mpd"](4608,R.a,R.a,[]),t["\u0275mpd"](4608,M.a,M.a,[t.ComponentFactoryResolver,t.NgZone,t.Injector,R.a,t.ApplicationRef]),t["\u0275mpd"](4608,O.a,O.a,[t.RendererFactory2,M.a]),t["\u0275mpd"](4608,S.a,S.a,[]),t["\u0275mpd"](4608,z.a,z.a,[]),t["\u0275mpd"](4608,U.a,U.a,[u.k,o.a,C.a]),t["\u0275mpd"](4608,d.a,d.a,[E.a]),t["\u0275mpd"](4608,p,p,[i.e,u.k]),t["\u0275mpd"](512,b.CommonModule,b.CommonModule,[]),t["\u0275mpd"](512,A["\u0275ba"],A["\u0275ba"],[]),t["\u0275mpd"](512,A.FormsModule,A.FormsModule,[]),t["\u0275mpd"](512,A.ReactiveFormsModule,A.ReactiveFormsModule,[]),t["\u0275mpd"](512,u.n,u.n,[[2,u.s],[2,u.k]]),t["\u0275mpd"](512,k.a,k.a,[]),t["\u0275mpd"](512,N.SelectModule,N.SelectModule,[]),t["\u0275mpd"](512,D.FileUploadModule,D.FileUploadModule,[]),t["\u0275mpd"](512,I.a,I.a,[]),t["\u0275mpd"](512,j.a,j.a,[]),t["\u0275mpd"](512,H.a,H.a,[]),t["\u0275mpd"](512,L.a,L.a,[]),t["\u0275mpd"](512,q.a,q.a,[]),t["\u0275mpd"](512,J.a,J.a,[]),t["\u0275mpd"](512,s,s,[]),t["\u0275mpd"](256,X.a,{autoClose:!0},[]),t["\u0275mpd"](1024,u.i,function(){return[[{path:"",component:c}]]},[])])})}});